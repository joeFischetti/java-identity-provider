<?xml version="1.0" encoding="UTF-8"?>

<AttributeResolver xmlns="urn:mace:shibboleth:2.0:resolver"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:resolver="urn:mace:shibboleth:2.0:resolver"
    xmlns:encoder="urn:mace:shibboleth:2.0:attribute:encoder"
    xmlns:simple="urn:mace:shibboleth:2.0:resolver:ad:simple"
    xmlns:ldap="urn:mace:shibboleth:2.0:resolver:dc:ldap"
    xsi:schemaLocation="
        urn:mace:shibboleth:2.0:resolver classpath:/schema/shibboleth-2.0-attribute-resolver.xsd
        urn:mace:shibboleth:2.0:attribute:encoder classpath:/schema/shibboleth-2.0-attribute-encoder.xsd
        urn:mace:shibboleth:2.0:resolver:ad:simple classpath:/schema/shibboleth-2.0-attribute-resolver-ad-simple.xsd
        urn:mace:shibboleth:2.0:resolver:dc:ldap classpath:/schema/shibboleth-2.0-attribute-resolver-dc-ldap.xsd">
        
    <resolver:AttributeDefinition xsi:type="simple:Simple" id="uid">
        <resolver:DataConnectorDependency ref="LocalDirectory" />
    </resolver:AttributeDefinition>
    
    <resolver:AttributeDefinition xsi:type="simple:Simple" id="cn">
        <resolver:DataConnectorDependency ref="LocalDirectory" />
    </resolver:AttributeDefinition>
    
    <resolver:AttributeDefinition xsi:type="simple:Simple" id="email" sourceAttributeID="mail">
        <resolver:DataConnectorDependency ref="LocalDirectory" />
        <resolver:AttributeEncoder xsi:type="encoder:SAML2String" name="0.9.2342.19200300.100.1.3" friendlyName="email" />
    </resolver:AttributeDefinition>
        
    <resolver:DataConnector xsi:type="ldap:LDAPDirectory"
                                       id="LocalDirectory"
                                       ldapUrl="ldap://localhost:10389/"
                                       baseDN="dc=georgetown,dc=edu"
                                       principal="uid=admin,ou=system"
                                       principalCredential="secret">
                                       
        <ldap:FilterTemplate>
            <![CDATA[
                (uid=${principal})
            ]]>
        </ldap:FilterTemplate>
        
    </resolver:DataConnector>
    
</AttributeResolver>