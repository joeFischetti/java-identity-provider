<?xml version="1.0" encoding="UTF-8"?>
<project name="Shibboleth IdP V3 - Jetty Container" basedir=".." default="install">

    <taskdef resource="net/shibboleth/idp/installer/ant.xml" />

    <target name="install" depends="init, checkini, copyini" />

    <target name="init">
        <tstamp />
        <hostinfo />
    </target>

    <target name="checkini">
        <available property="idp.ini.present" file="jetty-base/start.d/idp.ini" />
    </target>
    
    <target name="copyini" unless="idp.ini.present">
        <mkdir dir="jetty-base/start.d"/>
        <copy file="jetty-base/start.d.dist/jsp.ini" tofile="jetty-base/start.d/jsp.ini" overwrite="false" failonerror="false" />
        <copy file="jetty-base/start.d.dist/jstl.ini" tofile="jetty-base/start.d/jstl.ini" overwrite="false" failonerror="false" />
        <mergeproperties inFile="jetty-base/start.d.dist/idp.ini" outFile="jetty-base/start.d/idp.ini" mergeFile="${jetty.merge.properties}" />
    </target>
    
    <target name="tidy">
        <delete file="${jetty.merge.properties}" failonerror="false" />
    </target>
    
</project>
    