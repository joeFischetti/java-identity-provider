
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="edu.internet2.middleware.shibboleth.idp.consent" />

    <!-- Web -->
    <bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityLayoutViewResolver"
        p:viewClass="org.springframework.web.servlet.view.velocity.VelocityView" p:prefix="/WEB-INF/views/" p:suffix=".vm" />

    <!-- Internationalization -->
    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basenames">
            <list>
                <value>terms-of-use</value>
                <value>attribute-release</value>
            </list>
        </property>
    </bean>

    <!-- Persistence -->
    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager" p:dataSource-ref="dataSource" />

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close"
        p:driverClassName="org.hsqldb.jdbcDriver"
        p:url="jdbc:hsqldb:file:/tmp/userconsent.db"
        p:username="SA"
        p:password="" />

    <bean id="storage" class="edu.internet2.middleware.shibboleth.idp.consent.persistence.JDBCStorage" p:dataSource-ref="dataSource" />

    <!-- Configuration -->
    <bean id="userConsentContextBuilder" class="edu.internet2.middleware.shibboleth.idp.consent.components.UserConsentContextBuilder"
        p:uniqueIdAttribute="uniqueID" />

    <bean id="termsOfUse" class="edu.internet2.middleware.shibboleth.idp.consent.components.TermsOfUse" init-method="init"
        p:version="1.0"
        p:resource="/tmp/terms-of-use-example.txt" />
         
    <bean id="attributeReleaseController" class="edu.internet2.middleware.shibboleth.idp.consent.controller.AttributeReleaseController"
        p:globalConsentEnabled="false" />
        
    <bean id="descriptionBuilder" class="edu.internet2.middleware.shibboleth.idp.consent.components.DescriptionBuilder"
        p:preferredLocale="en-US"
        p:localeEnforcement="false"
        p:SAMLMDRelyingPartyConfigurationManager="shibboleth.RelyingPartyConfigurationManager" />

    <bean id="relyingPartyBlacklist" class="edu.internet2.middleware.shibboleth.idp.consent.components.RelyingPartyBlacklist">
         <property name="blacklist">
            <set></set>
          </property>
    </bean>
      
    <bean id="attributeListConfiguration" class="edu.internet2.middleware.shibboleth.idp.consent.components.AttributeListConfiguration">
         <property name="sortedAttributeIds">
            <list></list>
          </property>
         <property name="blacklistedAttributeIds">
            <set></set>
          </property>
    </bean>

</beans>