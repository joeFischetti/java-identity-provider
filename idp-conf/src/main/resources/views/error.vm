##
## Velocity Template for error end-state
##
## Velocity context will contain the following properties
## flowRequestContext - the Spring Web Flow RequestContext
## encoder - HTMLEncoder class
## request - HttpServletRequest
## response - HttpServletResponse

#if ($flowRequestContext)
    #set ($eventId = $flowRequestContext.getCurrentEvent().getId())
    #set ($appContext = $flowRequestContext.getFlowExecutionContext().getActiveSession().getDefinition().getApplicationContext())
    #set ($locale = $flowRequestContext.getExternalContext().getLocale())
    #set ($eventKey = $appContext.getMessage($eventId, null, "error", $locale))
    #set ($titleSuffix = $appContext.getMessage("${eventKey}.title", null, "Error", $locale))
    #set ($message = $appContext.getMessage("${eventKey}.message", null, "ERROR: $eventId", $locale))
    
    #if ($eventId == "AccessDenied")
        $response.setStatus(403)
    #end
#else
    #set ($titleSuffix = "Error")
    #if ($exception)
        #set ($message = "ERROR: $exception.getClass().getName()")
    #else
        #set ($message = "No specific error available")
    #end
#end

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  	<head>
    	<meta charset="utf-8" />
    	<title>Web Login Service - $titleSuffix</title>
    	<link rel="stylesheet" type="text/css" href="$request.getContextPath()/css/main.css"/>
  	</head>
  	
  	<body>
    <div class="wrapper">
    	<div class="container">
        	<header>
				<img src="$request.getContextPath()/images/dummylogo.png" alt="Replace or remove this logo"/>
				<h3>Web Login Service - $titleSuffix</h3>
			</header>
		
        	<div class="content">
            #evaluate($message)
    		</div>
    	</div>

      	<footer>
        	<div class="container container-footer">
          		<p class="footer-text">Insert your footer text here.</p>
        	</div>
      	</footer>
      	
    </div>
    </body>
</html>