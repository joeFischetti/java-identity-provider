##
## Velocity Template for DisplayAttributeReleaseConsentPage view-state
##
## Velocity context will contain the following properties :
##
## TODO This is only a rudimentary UI.
#set ($locale = $flowRequestContext.getExternalContext().getLocale())
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta charset="utf-8" />
        <title>#springMessageText("idp.attribute-consent.title" "Attribute Consent")</title>
        <link rel="stylesheet" type="text/css" href="$request.getContextPath()/css/main.css"/>
    </head>
    <body>
        <div class="wrapper">
            <div class="container">
                <header>
                    <a class="logo" href="../images/dummylogo.png">
                        <img src="$request.getContextPath()/images/dummylogo.png" alt="Replace or remove this logo"/>
                    </a>
                </header>
                <div class="content" >
                    <form action="$flowExecutionUrl" method="post"  >
                        <table>
                            #foreach($attribute in $attributeConsentContext.getProcessedAttributes().values())
                                #set($serializedValue = ${consentContext.getConsentChoices().get($attribute.id).getSecond()} )
                                #set($encodedValue = $encoder.encodeForHTML($serializedValue) )
                                <tr>
                                    <td>$attributeDisplayNameFunction.apply($attribute)</td>
                                    <td>$attribute.values</td>
                                    <td>
                                        <input type="checkbox" name="consents" value="${encodedValue}" />
                                    </td>
                                </tr>
                            #end
                        </table>
                        ## #if ($globalConsentEnabled)
                            ## <input type="checkbox" name="consent.global"> value="yes" />
                            ## #springMessage("attribute-release.global-consent")
                            ## #endif
                            <section>
                                <button class="form-element form-button" type="submit" name="_eventId_proceed" >#springMessageText("idp.attribute-consent.submit" "Submit")</button>
                            </section>
                    </form>
                </div>
            </div>
            <footer>
                <div class="container container-footer">
                    <p class="footer-text">Insert your footer text here.</p>
                </div>
            </footer>
        </div>
    </body>
</html>
